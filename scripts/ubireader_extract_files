import sys

from ubireader.ui.scripts import ExtractFilesUi
from ubireader.exceptions import UBIReaderParseError

def main():
    ui = ExtractFilesUi(True)
    ui.usage='ubireader_extract_files [options] filepath'

    if len(sys.argv) == 1:
        ui.parser.print_help()
        sys.exit(1)
    
    args = vars(ui.parser.parse_args())

    func = args.pop('func')
    filepath = args.pop('filepath')

    try:
        func(filepath, **args)
    except UBIReaderParseError as e:
        sys.exit("Error: " + str(e))

if __name__ == "__main__":
    main()
